%% EMQX ACL example (file-based authorization).
%%
%% NOTE:
%% - Exact ACL format and the way to enable it may differ between EMQX versions.
%% - If this file is not used in your EMQX build, configure authorization in the EMQX Dashboard instead.
%%
%% Goal:
%% - Device user: publish telemetry, subscribe commands only.
%% - Server user: subscribe telemetry, publish commands only.
%%
%% Replace "fish1" with your device_id (topic first segment) if you don't use wildcard.

{allow, {user, "fish1"}, publish, ["fish1/device/telemetry"]}.
{allow, {user, "fish1"}, publish, ["fish1/device/reply"]}.
{allow, {user, "fish1"}, subscribe, ["fish1/device/command"]}.

{allow, {user, "fish_srv"}, subscribe, ["+/device/telemetry"]}.
{allow, {user, "fish_srv"}, subscribe, ["+/device/reply"]}.
{allow, {user, "fish_srv"}, publish, ["+/device/command"]}.

{deny, all}.
