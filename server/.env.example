# Copy to server/.env and fill values. DO NOT commit server/.env (already in .gitignore).

# ===================== HTTP =====================
NODE_ENV=production
PORT=8080
TRUST_PROXY=1

# Required for session signing. Generate a long random string.
SESSION_SECRET=CHANGE_ME_TO_A_LONG_RANDOM_STRING

# Optional: if you run behind a reverse proxy with HTTPS, keep this on.
# If you only expose HTTP directly (not recommended), set to 0.
COOKIE_SECURE=1

# ===================== Admin Bootstrap =====================
# Used only when there is no admin user yet.
ADMIN_USERNAME=admin
ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# ===================== PostgreSQL =====================
# Example (docker-compose): postgresql://fish:fishpass@postgres:5432/fish
DATABASE_URL=postgresql://fish:fishpass@postgres:5432/fish

# ===================== MQTT (EMQX) =====================
# Example:
# - mqtt://emqx:1883   (inside docker network)
# - mqtts://fish.530555.xyz:8883 (TLS)
MQTT_URL=mqtt://emqx:1883
MQTT_USERNAME=fish_srv
MQTT_PASSWORD=CHANGE_ME

# Subscribe pattern for telemetry. Firmware default is: fish1/device/telemetry
# If you have multiple devices, use: +/device/telemetry
MQTT_TELEMETRY_SUB=+/device/telemetry

# Default device ID (first topic segment). Used when requests don't pass device_id.
DEFAULT_DEVICE_ID=fish1

# ===================== Data Retention =====================
# Telemetry retention. Cleanup runs periodically.
DATA_RETENTION_DAYS=30

# Limit points returned by /api/history (downsampling happens automatically).
HISTORY_MAX_POINTS=1200

